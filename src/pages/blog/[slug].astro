---
import {getCollection, type CollectionEntry} from "astro:content";
import {Image} from 'astro:assets';
import MainLayout from "../../layouts/MainLayout.astro";

export const getStaticPaths = async () => {
    const posts = await getCollection('posts');
    const paths = posts.map(post => {
        return {
            params: {
                slug: post.slug
            },
            props: {
                post
            }
        }
    })
    return paths;
}

type Props = {
    post: CollectionEntry<'posts'>
}

const {post} = Astro.props;

const {Content} = await post.render();
---

<MainLayout title={post.data.title} description="some desc" image="img">
    <h1>{post.data.title}</h1>
    <div class="prose prose-2xl overflow-visible relative mb-20">
    </div>
    <Image
            src={post.data.image}
            width={1024}
            height={1024 / 1.8}
            alt={post.data.title}
            class="rounded-xl shadow-xl mb-4 aspect-thumbnail object-cover"
    />
    <div class="prose prose-2xl overflow-visible relative mb-20">
        <Content/>
    </div>
</MainLayout>

